(function(n){"use strict";typeof define=="function"&&define.amd?define(function(t,i,r){r.exports=n(t("devextreme/core/utils/ajax"),t("jquery").Deferred,t("jquery").extend,t("devextreme/data/custom_store"),t("devextreme/data/utils"))}):typeof module=="object"&&module.exports?module.exports=n(require("devextreme/core/utils/ajax"),require("jquery").Deferred,require("jquery").extend,require("devextreme/data/custom_store"),require("devextreme/data/utils")):DevExpress.data.AspNet=n(DevExpress.utils.ajax||{sendRequest:jQuery.ajax},jQuery.Deferred,jQuery.extend,DevExpress.data.CustomStore,DevExpress.data.utils)})(function(n,t,i,r,u){"use strict";function h(r){function h(i,r,u,f){var e=t();return r&&!c?e.reject(new Error("Primary key is not specified (operation: '"+i+"', url: '"+u.url+"')")):(i==="load"?(u.cache=!1,u.dataType="json"):u.dataType="text",nt&&nt(i,u),n.sendRequest(u).then(function(n,t,i){f?f(e,n,i):e.resolve()},function(n,t){var i=y(n),r;tt&&(r={xhr:n,error:i},tt(r),i=r.error);i?e.reject(i):e.reject(n,t)})),e.promise()}function ft(n){return Array.isArray(c)?c.map(function(t){return[t,n[t]]}):[c,n]}function w(n,t){var r={};if(t&&(r.isCountQuery=t),n){["skip","take","requireTotalCount","requireGroupCount"].forEach(function(t){n[t]!==undefined&&(r[t]=n[t])});var h=u.normalizeSortingInfo,f=n.group,e=n.filter,s=n.select;n.sort&&(r.sort=JSON.stringify(h(n.sort)));f&&(v(f)||(f=h(f)),r.group=JSON.stringify(f));Array.isArray(e)&&(e=i(!0,[],e),o(e),r.filter=JSON.stringify(e));n.totalSummary&&(r.totalSummary=JSON.stringify(n.totalSummary));n.groupSummary&&(r.groupSummary=JSON.stringify(n.groupSummary));s&&(Array.isArray(s)||(s=[s]),r.select=JSON.stringify(s))}return i(r,ut),r}function it(n,t,i){var r=i.getResponseHeader("Content-Type"),u=r&&r.indexOf("application/json")>-1;n.resolve(u?JSON.parse(t):t)}var c=r.key,a=r.loadUrl,p=r.loadMethod||"GET",ut=r.loadParams,b=r.loadMode==="raw",k=r.updateUrl,d=r.insertUrl,g=r.deleteUrl,nt=r.onBeforeSend,tt=r.onAjaxError,rt={key:c,useDefaultSearch:!0,load:function(n){return h("load",!1,{url:a,method:p,data:w(n)},function(n,t){f(n,t,function(n){return[n.data,l(n)]})})},totalCount:!b&&function(n){return h("load",!1,{url:a,method:p,data:w(n,!0)},function(n,t){f(n,t,function(n){return[n.totalCount]})})},byKey:!b&&function(n){return h("load",!0,{url:a,method:p,data:w({filter:ft(n)})},function(n,t){f(n,t,function(n){return[n.data[0]]})})},update:k&&function(n,t){return h("update",!0,{url:k,method:r.updateMethod||"PUT",data:{key:e(n),values:JSON.stringify(t)}},it)},insert:d&&function(n){return h("insert",!0,{url:d,method:r.insertMethod||"POST",data:{values:JSON.stringify(n)}},it)},remove:g&&function(n){return h("delete",!0,{url:g,method:r.deleteMethod||"DELETE",data:{key:e(n)}})}};return s.forEach(function(n){var t=r[n];t!==undefined&&(rt[n]=t)}),rt}function f(n,t,i){t=c(t);t&&typeof t=="object"?n.resolve.apply(n,i(t)):n.reject(new Error("Unexpected response received"))}function c(n){return Array.isArray(n)?{data:n}:typeof n=="number"?{totalCount:n}:n}function l(n){return{totalCount:"totalCount"in n?n.totalCount:-1,groupCount:"groupCount"in n?n.groupCount:-1,summary:n.summary||null}}function e(n){return typeof n=="object"?JSON.stringify(n):n}function a(n){function t(n,t){for(n=String(n);n.length<t;)n="0"+n;return n}var i=[1+n.getMonth(),"/",n.getDate(),"/",n.getFullYear()],r=n.getHours(),u=n.getMinutes(),f=n.getSeconds(),e=n.getMilliseconds();return r+u+f+e>0&&i.push(" ",t(r,2),":",t(u,2),":",t(f,2),".",t(e,3)),i.join("")}function o(n){n.forEach(function(t,i){Array.isArray(t)?o(t):Object.prototype.toString.call(t)==="[object Date]"&&(n[i]=a(t))})}function v(n){if(!Array.isArray(n))return!1;for(var t=0;t<n.length;t++)if("groupInterval"in n[t]||"isExpanded"in n[t])return!0;return!1}function y(n){var i=n.getResponseHeader("Content-Type"),r=n.responseText,t,u;if(!i)return null;if(i.indexOf("text/plain")===0)return r;if(i.indexOf("application/json")===0){if(t=p(r),typeof t=="string")return t;if(typeof t=="object")for(u in t)if(typeof t[u]=="string")return t[u];return r}return null}function p(n){try{return JSON.parse(n)}catch(t){return null}}var s=["onLoading","onLoaded","onInserting","onInserted","onUpdating","onUpdated","onRemoving","onRemoved","onModifying","onModified","onPush","loadMode","cacheRawData","errorHandler"];return{createStore:function(n){return new r(h(n))}}});